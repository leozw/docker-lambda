const { trace } = require('@opentelemetry/api');

function logWithContext(message, level = 'info') {
  const currentSpan = trace.getSpan(trace.setSpan(context.active(), context.active()));
  const traceId = currentSpan ? currentSpan.spanContext().traceId : 'no-trace';

  console.log(`[${level.toUpperCase()}] [TraceID: ${traceId}] ${message}`);
}

module.exports = { logWithContext };
